{% extends 'base.html' %}
{% load static %}
{% load i18n parler_tags %}

{% block title %}{% translate 'Products' %} - {{collection.name}} {% endblock title %}

{% block body %}
    {% include 'nav.html' with current="collections" %}
    <!-- ======= Portfolio Section ======= -->
    <section class="portfolio">
        <div class="container-fluid m-1">
          <div class="section-title">
            <h2>Products in {{collection.name}}</h2>
          </div>
  
          <div class="row" data-aos="fade-up">
            <div class="col-lg-12 d-flex justify-content-center">
              <ul id="portfolio-flters">
                <li {% if not category %}class="filter-active"{% endif %}>
                  <a href="{% url 'collection_products' collection.id %}" style="color: inherit;">{% translate 'All' %}</a>
                </li>
                {% for cat in categories %}
                  <li {% if cat == category %}class="filter-active"{% endif %}>
                    <a href="{% url 'some_collection_products' collection.id cat.id%}" style="color: inherit;">{{cat.name}}</a>
                  </li>
                {% endfor %}
              </ul>
            </div>
          </div>
  
          <div class="row" data-aos="fade-up" data-aos-delay="150">
            {% for product in products %}
              <div class="col-lg-3 col-sm-4 col-6 d-flex p-0" data-aos-delay="150" data-aos="fade-up">
                <div class="portfolio-card m-1">
                  <a href="{% url 'product' product.id %}" class="link"> 
                    
                    <div class="image-box">
                      <img src="{{product.image_set.first.image.url}}" class="img-top" alt="">
                      <img src="{{product.image_set.last.image.url}}"  class="img-hidden" alt="">
                      <div class="sale">
                        {{product.collection.name}}
                      </div>
                    </div>
                    
                    <!--card body-->
                    <div class="body-wrapper">
                      <p><span>{{product.name}}</span>: {{product.price}} UZS</p>
                      {% for i, j in product.get_prices %}
                      <strong>{{i}}</strong>: {{j}} UZS<br>
                      {% endfor %}
                    </div>
                  
                  </a>
                </div>
              </div>
            {% endfor %}
          </div>

          <div class="row" id="pagination-wrapper">
            <div class="col-12">
              {% if products.has_other_pages %}
                <ul class="pagination">
                  {% if products.have_previous %}
                    <li class="page-item">
                      <a class="page-link" href="?page={{products.previous_page_number}}">&laquo;</a>
                    </li>
                  {% else %}
                    <li class="page-item disabled">
                      <a class="page-link">&laquo;</a>
                    </li>
                  {% endif %}
                  
                  {% for i in products.paginator.page_range %}
                    {% if products.number == i %}
                      <li class="page-item active">
                        <a class="page-link">{{i}}</a>
                      </li>
                    {% else %}
                      <li class="page-item"><a class="page-link" href="?page={{i}}">{{i}}</a></li>
                    {% endif %}
                  {% endfor %}

                  {% if products.have_next %}
                    <li class="page-item">
                      <a class="page-link" href="?page={{products.next_page_number}}">&raquo;</a>
                    </li>
                  {% else %}
                    <li class="page-item disabled">
                      <a class="page-link">&raquo;</a>
                    </li>
                  {% endif %}
                </ul>
              {% endif %}
              </div>
          </div>
  
        </div>
      </section><!-- End Portfolio Section -->
{% endblock body %}